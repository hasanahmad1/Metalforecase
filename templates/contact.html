{% extends "layout.html" %}
{% block content %}
<div class="container py-5">
  <h2 class="mb-4 text-primary fw-bold">Contact Us</h2>
  <p class="fs-5 mb-5">
    If you have questions or feedback, feel free to reach out using the form below or via our contact details.
  </p>

  <div class="row g-5">
    <!-- Contact Info -->
    <div class="col-md-5">
      <div class="card shadow-sm border-0 rounded-4 p-4 h-100">
        <h5 class="mb-4 text-secondary">Get in Touch</h5>
        <ul class="list-unstyled fs-5">
          <li class="mb-3">
            <strong>Email:</strong><br>
            <a href="mailto:support@forecastapp.com" class="text-decoration-none">support@forecastapp.com</a>
          </li>
          <li class="mb-3">
            <strong>Phone:</strong><br>
            +1 (555) 123-4567
          </li>
          <li class="mb-3">
            <strong>Address:</strong><br>
            123 Finance St.<br>
            Market City, Country
          </li>
        </ul>
      </div>
    </div>

    <!-- Contact Form -->
    <div class="col-md-7">
      <div class="card shadow-sm border-0 rounded-4 p-4">
        <h5 class="mb-4 text-secondary">Send Us a Message</h5>

        <!-- Alert placeholder -->
        <div id="alertPlaceholder"></div>

        <form method="post" id="contactForm" novalidate class="needs-validation">
          <div class="mb-3">
            <label for="name" class="form-label fw-semibold">Name</label>
            <input type="text" class="form-control" id="name" name="name" placeholder="Your full name" required>
            <div class="invalid-feedback">Please enter your name.</div>
          </div>

          <div class="mb-3">
            <label for="email" class="form-label fw-semibold">Email address</label>
            <input type="email" class="form-control" id="email" name="email" placeholder="you@example.com" required>
            <div class="invalid-feedback">Please enter a valid email address.</div>
          </div>

          <div class="mb-3">
            <label for="message" class="form-label fw-semibold">Message</label>
            <textarea class="form-control" id="message" name="message" rows="5" placeholder="Write your message here..." required></textarea>
            <div class="invalid-feedback">Please enter your message.</div>
          </div>

          <button type="submit" class="btn btn-primary px-4">Send Message</button>
        </form>
      </div>
    </div>
  </div>
</div>

<script>
  (() => {
    'use strict';

    const form = document.getElementById('contactForm');
    const alertPlaceholder = document.getElementById('alertPlaceholder');

    function showAlert(message, type) {
      const wrapper = document.createElement('div');
      wrapper.innerHTML = `
        <div class="alert alert-${type} alert-dismissible fade show" role="alert">
          ${message}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      `;
      alertPlaceholder.append(wrapper);
    }

    form.addEventListener('submit', function(event) {
      event.preventDefault();
      event.stopPropagation();

      if (!form.checkValidity()) {
        form.classList.add('was-validated');
        showAlert('Please fill out all required fields correctly.', 'danger');
        return;
      }

      // Clear previous alerts
      alertPlaceholder.innerHTML = '';

      // Simulate form submission delay
      showAlert('Sending message...', 'info');
      setTimeout(() => {
        // Remove "Sending message" alert
        alertPlaceholder.innerHTML = '';

        // Show success message
        showAlert('Thank you for contacting us! We will get back to you shortly.', 'success');

        // Reset form and validation classes
        form.reset();
        form.classList.remove('was-validated');

        // Focus on first input
        form.elements['name'].focus();
      }, 1500);
    });
  })();
</script>

{% endblock %}
